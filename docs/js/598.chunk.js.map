{"version":3,"file":"js/598.chunk.js","mappings":"sIAAA,o5Q","sources":["webpack://source-map/./src/mds/webpack/5webpack实战Vue脚手架.md"],"sourcesContent":["export default \"Vue开发环境搭建和react基本类似，不过有些点需要单独处理，处理`.vue`文件需要使用`vue-loader`插件，开发环境处理样式需要使用`vue-style-loader`插件，具体配置如下\\n\\n[项目地址](https://bgithub.xyz/Loneolf/practice/tree/master/webpack/myVueApp)\\n\\ncommon\\n```\\nconst path = require(\\\"path\\\");\\nconst HTMLWebpackPlugin = require(\\\"html-webpack-plugin\\\");\\nconst ESLintPlugin = require(\\\"eslint-webpack-plugin\\\");\\nconst { VueLoaderPlugin } = require(\\\"vue-loader\\\");\\nconst { DefinePlugin } = require(\\\"webpack\\\");\\nconst AutoImport = require(\\\"unplugin-auto-import/webpack\\\");\\nconst Components = require(\\\"unplugin-vue-components/webpack\\\");\\nconst { ElementPlusResolver } = require(\\\"unplugin-vue-components/resolvers\\\");\\n\\nmodule.exports = {\\n\\tentry: \\\"./src/main.js\\\",\\n\\tplugins: [\\n\\t\\tnew HTMLWebpackPlugin({\\n\\t\\t\\ttemplate: path.resolve(__dirname, \\\"../public/index.html\\\"), // 以该文件为模板生成HTML\\n\\t\\t}),\\n\\t\\tnew ESLintPlugin({\\n\\t\\t\\tcontext: path.resolve(__dirname, \\\"../src\\\"),\\n\\t\\t\\texclude: \\\"node_modules\\\",\\n\\t\\t\\tcache: true,\\n\\t\\t\\tcacheLocation: path.resolve(\\n\\t\\t\\t\\t__dirname,\\n\\t\\t\\t\\t\\\"../node_modules/.cache/.eslintcache\\\"\\n\\t\\t\\t),\\n\\t\\t}),\\n\\t\\tnew VueLoaderPlugin(),\\n\\t\\t// cross-env定义的环境变量给打包工具使用\\n\\t\\t// DefinePlugin定义环境变量给源代码使用，从而解决vue3页面警告的问题\\n\\t\\tnew DefinePlugin({\\n\\t\\t\\t__VUE_OPTIONS_API__: true,\\n\\t\\t\\t__VUE_PROD_DEVTOOLS__: false,\\n\\t\\t}),\\n\\t\\tAutoImport({\\n\\t\\t\\tresolvers: [ElementPlusResolver()],\\n\\t\\t}),\\n\\t\\tComponents({\\n\\t\\t\\tresolvers: [ElementPlusResolver()],\\n\\t\\t}),\\n\\t],\\n\\tmodule: {\\n\\t\\trules: [\\n\\t\\t\\t{\\n\\t\\t\\t\\ttest: /\\\\.(jp?eg|png|svg|webp|gif)$/, // 用正则匹配以jpg为结尾的资源\\n\\t\\t\\t\\ttype: \\\"asset\\\",\\n\\t\\t\\t\\t// asset 自动根据文件大小生成资源或者base64的url，默认值为8K 4*1024\\n\\t\\t\\t\\tparser: {\\n\\t\\t\\t\\t\\tdataUrlCondition: {\\n\\t\\t\\t\\t\\t\\tmaxSize: 10 * 1024, //\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t},\\n\\t\\t\\t},\\n\\t\\t\\t{\\n\\t\\t\\t\\ttest: /\\\\.(woff|woff2|ttf|otf|eot|txt)$/,\\n\\t\\t\\t\\ttype: \\\"asset/resource\\\",\\n\\t\\t\\t},\\n\\t\\t\\t{\\n\\t\\t\\t\\ttest: /\\\\.js$/,\\n\\t\\t\\t\\tinclude: path.resolve(__dirname, \\\"../src\\\"),\\n\\t\\t\\t\\tloader: \\\"babel-loader\\\",\\n\\t\\t\\t\\toptions: {\\n\\t\\t\\t\\t\\tcacheDirectory: true,\\n\\t\\t\\t\\t\\tcacheCompression: false,\\n\\t\\t\\t\\t},\\n\\t\\t\\t},\\n\\t\\t\\t{\\n\\t\\t\\t\\ttest: /\\\\.vue$/,\\n\\t\\t\\t\\tloader: \\\"vue-loader\\\",\\n\\t\\t\\t\\toptions: {\\n\\t\\t\\t\\t\\t// 开启缓存\\n\\t\\t\\t\\t\\tcacheDirectory: path.resolve(\\n\\t\\t\\t\\t\\t\\t__dirname,\\n\\t\\t\\t\\t\\t\\t\\\"../node_modules/.cache/vue-loader\\\"\\n\\t\\t\\t\\t\\t),\\n\\t\\t\\t\\t},\\n\\t\\t\\t},\\n\\t\\t],\\n\\t},\\n\\tresolve: {\\n\\t\\textensions: [\\\".vue\\\", \\\".js\\\", \\\".json\\\"], // 自动补全文件扩展名，让jsx可以使用\\n\\t\\t// 路径别名\\n\\t\\talias: {\\n\\t\\t\\t\\\"@\\\": path.resolve(__dirname, \\\"../src\\\"),\\n\\t\\t},\\n\\t},\\n\\toptimization: {\\n\\t\\tsplitChunks: {\\n\\t\\t\\tchunks: \\\"all\\\",\\n\\t\\t\\tcacheGroups: {\\n\\t\\t\\t\\tvue: {\\n\\t\\t\\t\\t\\ttest: /[\\\\\\\\/]node_modules[\\\\\\\\/]vue(.*)?[\\\\\\\\/]/,\\n\\t\\t\\t\\t\\tname: \\\"vue-chunk\\\",\\n\\t\\t\\t\\t\\tpriority: 40,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\telementPlus: {\\n\\t\\t\\t\\t\\ttest: /[\\\\\\\\/]node_modules[\\\\\\\\/]element-plus[\\\\\\\\/]/,\\n\\t\\t\\t\\t\\tname: \\\"elementPlus-chunk\\\",\\n\\t\\t\\t\\t\\tpriority: 30,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tlibs: {\\n\\t\\t\\t\\t\\ttest: /[\\\\\\\\/]node_modules[\\\\\\\\/]/,\\n\\t\\t\\t\\t\\tname: \\\"libs-chunk\\\",\\n\\t\\t\\t\\t\\tpriority: 20,\\n\\t\\t\\t\\t},\\n\\t\\t\\t},\\n\\t\\t},\\n\\t\\truntimeChunk: {\\n\\t\\t\\tname: (entrypoint) => `runtime~${entrypoint.name}.js`,\\n\\t\\t},\\n\\t},\\n};\\n\\n```\\n\\ndev配置\\n```\\n// const path = require(\\\"path\\\");\\n\\n\\nmodule.exports = {\\n\\tentry: \\\"./src/main.js\\\",\\n\\toutput: {\\n\\t\\tpath: undefined,\\n\\t\\tfilename: \\\"js/[name].js\\\",\\n\\t\\tchunkFilename: \\\"js/[name].chunk.js\\\",\\n\\t\\tassetModuleFilename: \\\"[name]_[hash:10].[ext]\\\", // images/test.png\\n\\t},\\n\\tmode: \\\"development\\\",\\n\\tdevtool: \\\"cheap-module-source-map\\\",\\n\\tplugins: [\\n\\t\\t\\n\\t],\\n\\tmodule: {\\n\\t\\trules: [\\n\\t\\t\\t{\\n\\t\\t\\t\\ttest: /\\\\.css$/,\\n\\t\\t\\t\\tuse: [\\n\\t\\t\\t\\t\\t\\\"vue-style-loader\\\",\\n\\t\\t\\t\\t\\t\\\"css-loader\\\",\\n\\t\\t\\t\\t\\t\\\"postcss-loader\\\"\\n\\t\\t\\t\\t],\\n\\t\\t\\t},\\n\\t\\t]\\n\\t},\\n\\tdevServer: {\\n\\t\\tclient: {\\n\\t\\t\\toverlay: false,\\n\\t\\t},\\n\\t\\tcompress: true,\\n\\t\\t// 自定义端口号\\n\\t\\tport: 3000,\\n\\t\\topen: true,\\n\\t\\thot: true,\\n\\t\\thistoryApiFallback: true,\\n\\t\\t// proxy: { // 配置代理\\n\\t\\t// \\t// \\\"/api\\\": \\\"http://localhost:9000\\\", // 直接代理\\n\\t\\t// \\t\\\"/api\\\": { // 使用对象，可以重写路径\\n\\t\\t// \\t\\ttarget: \\\"http://localhost:9000\\\",\\n        //         // 重写路径\\n        //         pathRewrite: {\\n        //             \\\"^/api\\\":\\\"/test\\\",\\n        //         },\\n        //         // 确保请求主机名是target中的主机名\\n        //         changeOrigin: true\\n\\t\\t// \\t}\\n\\t\\t// },\\n\\t},\\n};\\n\\n```\\nprod配置\\n```\\nconst path = require(\\\"path\\\");\\nconst MiniCssExtractPlugin = require(\\\"mini-css-extract-plugin\\\");\\nconst CssMinimizerWebpakPlugin = require(\\\"css-minimizer-webpack-plugin\\\");\\nconst TerserPlugin = require(\\\"terser-webpack-plugin\\\");\\nconst CopyPlugin = require(\\\"copy-webpack-plugin\\\");\\n\\nmodule.exports = {\\n\\toutput: {\\n\\t\\tpath: path.resolve(__dirname, \\\"../dist\\\"),\\n\\t\\tclean: true,\\n\\t\\tfilename: \\\"js/[name]_[contenthash:10].js\\\",\\n\\t\\tchunkFilename: \\\"js/[name].chunk.js\\\",\\n\\t\\tassetModuleFilename: \\\"asset/[name]_[contenthash:10][ext]\\\", // images/test.png\\n\\t},\\n\\tmode: \\\"production\\\", // development | production\\n\\t// devtool: \\\"source-map\\\",\\n\\tdevtool: false,\\n\\tplugins: [\\n\\t\\tnew MiniCssExtractPlugin({\\n\\t\\t\\t// 默认生成main.css\\n\\t\\t\\tfilename: \\\"style/[name]_[contenthash].css\\\", // 生成的文件放在dest/style目录下，文件名为hash值\\n\\t\\t}),\\n\\t\\tnew CopyPlugin({\\n\\t\\t\\tpatterns: [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tfrom: path.resolve(__dirname, \\\"../public\\\"),\\n\\t\\t\\t\\t\\tto: path.resolve(__dirname, \\\"../dist\\\"),\\n\\t\\t\\t\\t\\tglobOptions: {\\n\\t\\t\\t\\t\\t\\t// 忽略index.html文件\\n\\t\\t\\t\\t\\t\\tignore: [\\\"**/index.html\\\"],\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t}\\n\\t\\t\\t],\\n\\t\\t}),\\n\\t],\\n\\tmodule: {\\n\\t\\trules: [\\n\\t\\t\\t{\\n\\t\\t\\t\\ttest: /\\\\.css$/,\\n\\t\\t\\t\\tuse: [\\n\\t\\t\\t\\t\\tMiniCssExtractPlugin.loader,\\n\\t\\t\\t\\t\\t\\\"css-loader\\\",\\n\\t\\t\\t\\t\\t\\\"postcss-loader\\\"\\n\\t\\t\\t\\t],\\n\\t\\t\\t},\\n\\t\\t]\\n\\t},\\n\\toptimization: {\\n\\t\\tminimizer: [new CssMinimizerWebpakPlugin(), new TerserPlugin()],\\n\\t},\\n};\\n\\n```\\n\\nwebpack.config.js\\n```\\nconst { merge } = require(\\\"webpack-merge\\\");\\n\\nconst commonConfig = require(\\\"./webpack.config.common\\\");\\nconst productionConfig = require(\\\"./webpack.config.prod\\\");\\nconst developmentConfig = require(\\\"./webpack.config.dev\\\");\\n\\nmodule.exports = () => {\\n  switch (process.env.NODE_ENV) {\\n    case \\\"development\\\":\\n      return merge(commonConfig, developmentConfig);\\n    case \\\"production\\\":\\n      return merge(commonConfig, productionConfig);\\n    default:\\n      return new Error(\\\"No match configuration was found\\\");\\n  }\\n};\\n```\\n如果项目中引入了vant或者element这些UI库，按需加载或者自定义主体需要额外处理，按照文档增加相应配置即可\\n\\n依赖包及指令\\n```\\n{\\n  \\\"name\\\": \\\"my-vue\\\",\\n  \\\"version\\\": \\\"1.0.0\\\",\\n  \\\"description\\\": \\\"\\\",\\n  \\\"main\\\": \\\"index.js\\\",\\n  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"npm run dev\\\",\\n    \\\"dev\\\": \\\"cross-env NODE_ENV=development webpack serve --config ./config/webpack.config.js\\\",\\n    \\\"build\\\": \\\"cross-env NODE_ENV=production webpack --config ./config/webpack.config.js\\\"\\n  },\\n  \\\"keywords\\\": [],\\n  \\\"author\\\": \\\"\\\",\\n  \\\"license\\\": \\\"ISC\\\",\\n  \\\"devDependencies\\\": {\\n    \\\"@babel/core\\\": \\\"^7.23.2\\\",\\n    \\\"@babel/plugin-proposal-private-property-in-object\\\": \\\"^7.21.11\\\",\\n    \\\"@vue/cli-plugin-babel\\\": \\\"^5.0.8\\\",\\n    \\\"autoprefixer\\\": \\\"^7.2.6\\\",\\n    \\\"babel-loader\\\": \\\"^9.1.3\\\",\\n    \\\"babel-preset-react-app\\\": \\\"^10.0.1\\\",\\n    \\\"copy-webpack-plugin\\\": \\\"^11.0.0\\\",\\n    \\\"cross-env\\\": \\\"^7.0.3\\\",\\n    \\\"css-loader\\\": \\\"^6.8.1\\\",\\n    \\\"css-minimizer-webpack-plugin\\\": \\\"^5.0.1\\\",\\n    \\\"customize-cra\\\": \\\"^1.0.0\\\",\\n    \\\"eslint\\\": \\\"^8.49.0\\\",\\n    \\\"eslint-config-react-app\\\": \\\"^7.0.1\\\",\\n    \\\"eslint-plugin-import\\\": \\\"^2.28.1\\\",\\n    \\\"eslint-plugin-vue\\\": \\\"^9.18.1\\\",\\n    \\\"eslint-webpack-plugin\\\": \\\"^4.0.1\\\",\\n    \\\"husky\\\": \\\"^8.0.3\\\",\\n    \\\"less-loader\\\": \\\"^11.1.3\\\",\\n    \\\"mini-css-extract-plugin\\\": \\\"^2.7.6\\\",\\n    \\\"node-sass\\\": \\\"^9.0.0\\\",\\n    \\\"postcss-loader\\\": \\\"^7.3.3\\\",\\n    \\\"postcss-preset-env\\\": \\\"^9.1.3\\\",\\n    \\\"react-refresh\\\": \\\"^0.14.0\\\",\\n    \\\"sass-loader\\\": \\\"^13.3.2\\\",\\n    \\\"terser-webpack-plugin\\\": \\\"^5.3.9\\\",\\n    \\\"unplugin-auto-import\\\": \\\"^0.16.7\\\",\\n    \\\"unplugin-vue-components\\\": \\\"^0.25.2\\\",\\n    \\\"vue-loader\\\": \\\"^17.3.1\\\",\\n    \\\"vue-template-compiler\\\": \\\"^2.7.15\\\",\\n    \\\"webpack\\\": \\\"^5.88.1\\\",\\n    \\\"webpack-cli\\\": \\\"^5.1.4\\\",\\n    \\\"webpack-dev-server\\\": \\\"^4.15.1\\\",\\n    \\\"webpack-merge\\\": \\\"^5.10.0\\\"\\n  },\\n  \\\"broeserslist\\\": [\\n    \\\"> 1%\\\",\\n    \\\"last 2 versions\\\"\\n  ],\\n  \\\"dependencies\\\": {\\n    \\\"element-plus\\\": \\\"^2.4.2\\\",\\n    \\\"vue\\\": \\\"^3.3.8\\\",\\n    \\\"vue-router\\\": \\\"^4.2.5\\\"\\n  }\\n}\\n\\n```\\n\\n其它配置`.eslintrc.js`，使用了官方提供的lint插件\\n```\\nmodule.exports = {\\n\\troot: true,\\n\\tenv: {\\n\\t\\tnode: true,\\n\\t},\\n\\textends: [\\\"plugin:vue/vue3-essential\\\", \\\"eslint:recommended\\\"],\\n\\tparserOptions: {\\n\\t\\tparser: \\\"@babel/eslint-parser\\\",\\n\\t},\\n\\trules: {\\n\\t\\t\\\"vue/multi-word-component-names\\\": 0\\n\\t}\\n};\\n\\n```\\nbabel.config.js\\n```\\nmodule.exports = {\\n\\tpresets: [\\\"@vue/cli-plugin-babel/preset\\\"],\\n};\\n\\n```\";"],"names":[],"sourceRoot":""}