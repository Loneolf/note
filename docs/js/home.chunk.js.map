{"version":3,"file":"js/home.chunk.js","sources":["webpack://source-map/./src/page/home/bgConfig.js","webpack://source-map/./src/page/home/index.tsx","webpack://source-map/./src/config/common.ts"],"sourcesContent":["export const bgImgCatalog = [{\"label\":\"1afcdb25fa1848c1a38a7d6c2d033df5.jpg\",\"key\":\"1afcdb25fa1848c1a38a7d6c2d033df5.jpg\"},{\"label\":\"20240409185340171266002049531.jpg\",\"key\":\"20240409185340171266002049531.jpg\"},{\"label\":\"45663c9f2ce54eb2ae8628efb0c43390.jpg\",\"key\":\"45663c9f2ce54eb2ae8628efb0c43390.jpg\"},{\"label\":\"5c23d52f880511ebb6edd017c2d2eca2.jpg\",\"key\":\"5c23d52f880511ebb6edd017c2d2eca2.jpg\"},{\"label\":\"9439aad9fd9a455b9fe428221378afd2.png\",\"key\":\"9439aad9fd9a455b9fe428221378afd2.png\"},{\"label\":\"bizhihui_com_20231109220430169953867038181.jpg\",\"key\":\"bizhihui_com_20231109220430169953867038181.jpg\"},{\"label\":\"bizhihui_com_20231109222905169954014578572.jpg\",\"key\":\"bizhihui_com_20231109222905169954014578572.jpg\"},{\"label\":\"bizhihui_com_20231109231749169954306948063.jpg\",\"key\":\"bizhihui_com_20231109231749169954306948063.jpg\"},{\"label\":\"bizhihui_com_20231110230920169962896093913.jpg\",\"key\":\"bizhihui_com_20231110230920169962896093913.jpg\"},{\"label\":\"bizhihui_com_20231111142611169968397120808.jpg\",\"key\":\"bizhihui_com_20231111142611169968397120808.jpg\"},{\"label\":\"bizhihui_com_20231111170029169969322986652.png\",\"key\":\"bizhihui_com_20231111170029169969322986652.png\"},{\"label\":\"c0dd2053b27e4957af8aedd5fe3ca485.jpg\",\"key\":\"c0dd2053b27e4957af8aedd5fe3ca485.jpg\"},{\"label\":\"cbcf05e9ea98488cba2a416bb33f1bbe.jpg\",\"key\":\"cbcf05e9ea98488cba2a416bb33f1bbe.jpg\"}]","import React, { useEffect, useState } from \"react\";\nimport { remoteImgUrl } from '@cf/common'\nimport { bgImgCatalog } from './bgConfig'\nimport './index.scss'\n\nexport default function Fetch() {\n\tconst [bgImg, setBgImg] = useState('')\n\tconst [imgArr, setImgArr] = useState([] as string[])\n\tuseEffect(() => {\n\t\tlet tem = bgImgCatalog.map((item) => {\n\t\t\treturn `${remoteImgUrl}homeBg/${item.key}`\n\t\t})\n\t\tlet imgC = tem.sort(() => Math.random() - 0.5)\n\t\tconsole.log(imgC, tem)\n\t\tsetImgArr(imgC)\n\t\tsetBgImg(tem[0])\n\t\t// 预加载图片\n\t\tpreloadImages([imgC[0]]).then((images) => {\n\t\t\tconsole.log('首张图片已加载完毕，开始加载剩余图片', images);\n\t\t\tpreloadImages(tem).then((images) => {\n\t\t\t\tconsole.log('所有图片已加载完成', images);\n\t\t\t}).catch((error) => {\n\t\t\t\tconsole.error(error);\n\t\t\t});\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n\t}, []);\n\n\tfunction changeBgImg() {\n\t\tlet index = imgArr.findIndex((item) => {\n\t\t\treturn item === bgImg\n\t\t})\n\t\tlet nextIndex = ++index\n\t\tif (nextIndex >= imgArr.length) nextIndex = 0\n\t\tsetBgImg(imgArr[nextIndex])\n\t}\n\n\t// 图片预加载函数\n    function preloadImages(imageUrls: string[]): Promise<HTMLImageElement[]> {\n        let loadedImages: HTMLImageElement[] = [];\n        let loadNumber: number = imageUrls.length;\n\t\tconsole.log('aaaaaloadImg', imageUrls)\n        return new Promise((resolve, reject) => {\n            imageUrls.forEach((url, index) => {\n                let img: HTMLImageElement = new Image();\n\t\t\t\tconsole.log('loadImg', url)\n                img.onload = function () {\n\t\t\t\t\tconsole.log('loadImgover', this)\n                    loadedImages[index] = this as HTMLImageElement;\n                    loadNumber--;\n\n                    if (loadNumber === 0) {\n                        resolve(loadedImages);\n                    }\n                };\n                img.onerror = function () {\n                    reject(new Error(`图片 ${url} 加载失败`));\n                };\n                img.src = url;\n            });\n        });\n    }\n\n\treturn (\n\t\t<div className=\"home\">\n\t\t\t<div className=\"imgBgBox\" style={{backgroundImage: `url(${bgImg}`}}></div>\n\t\t\t<div className=\"saying\" onClick={changeBgImg}>\n\t\t\t\t<div className=\"sayTitle\">青竹小轩</div>\n\t\t\t\t<p className=\"desc\">不积跬步，无以至千里</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","const remoteBaseUrl = \"https://qing-1258827329.cos.ap-beijing.myqcloud.com/\"\nconst remoteImgUrl = \"https://img-1258827329.cos.ap-beijing.myqcloud.com/\"\n\nexport {\n    remoteBaseUrl,\n    remoteImgUrl\n}"],"names":["bgImgCatalog","Fetch","_useState","bgImg","setBgImg","_useState1","imgArr","setImgArr","useEffect","tem","item","remoteImgUrl","imgC","Math","console","preloadImages","images","error","imageUrls","loadedImages","loadNumber","Promise","resolve","reject","url","index","img","Image","Error","nextIndex","remoteBaseUrl"],"mappings":"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"}